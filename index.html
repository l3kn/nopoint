<html>
  <head>
  <title>nopoint</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="Markdown.Converter.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div class="container"></div>
    <div class="count"></div>    
  </body>
</html>
<script>
  var current_slide = 0;
//  console.log(window.location.search.substr(1));
//  if(window.location.search != "")
//    current_slide = window.location.search.substr(1)-1; 
  var converter = new Markdown.Converter();
  var slides = new Array();
 	$.ajax({
    url: 'slide.md',
    async: false,   // asynchronous request? (synchronous requests are discouraged...)
    cache: false,   // with this, you can force the browser to not make cache of the retrieved data
    success: function(data) {
      var converted = converter.makeHtml(data);
      slides = converted.split('<hr />');
    }
  });

  function loadSlide ()
  {
	  $('.container').html(slides[current_slide]);
    var string = 'Slide ' + (current_slide+1) + ' of ' + slides.length
    $('.count').html('<p>' +  string + '</p>');
  }

  function toggleFullscreen() 
  {
    var element = document.getElementsByTagName("body")[0];
   
    if (element.requestFullScreen) {
   
      if (!document.fullScreen) {
        element.requestFullscreen();
      } else {
        document.exitFullScreen();
      }
   
    } else if (element.mozRequestFullScreen) {
   
      if (!document.mozFullScreen) {
        element.mozRequestFullScreen();
      } else {
        document.mozCancelFullScreen();
      }
   
    } else if (element.webkitRequestFullScreen) {
   
      if (!document.webkitIsFullScreen) {
        element.webkitRequestFullScreen();
      } else {
        document.webkitCancelFullScreen();
      }
   
    }
   
  }

  loadSlide();
  toggleFullscreen(); 

	$(document).keydown(function(e){
    if (e.keyCode == 37) {
    	if (current_slide>0) { // show alert
    		current_slide--;
    		loadSlide();
    	}
      return false;
    }
    else if (e.keyCode == 38) {
      toggleFullscreen();
      return false;
    }    
    else if (e.keyCode == 39) {
    	if (current_slide < slides.length-1) {
    		current_slide++;
    		loadSlide();
    	}
      return false;
    }
    else if (e.keyCode == 40) {
        current_slide = 0;
        loadSlide();
      return false;
    }    
	});  
</script>